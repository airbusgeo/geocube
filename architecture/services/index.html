<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://github.com/airbusgeo/geocube/architecture/services/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>Geocube services - Geocube Server</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Geocube services";
        var mkdocs_page_input_path = "architecture/services.md";
        var mkdocs_page_url = "/airbusgeo/geocube/architecture/services/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Geocube Server
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../quickstart/">Getting started</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Architecture</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../solution/">Ecosystem</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">Geocube services</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#api-server">API Server</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#consolidater">Consolidater</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#autoscaler">Autoscaler</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#downloader">Downloader</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../interfaces/">Interfaces</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mucog/">MuCOG</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/grpc/">GRPC documentation</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Installation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/prerequisite/">Prerequisite</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/local-install/">Local environment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/docker-install/">Docker</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/k8s-install/">Deploying with Kubernetes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/others/">Customize environment</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../installation/upgrade/">Upgrade</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">User guide</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/tutorials/">Tutorials</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/entities/">Entities</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/indexation/">Indexation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/access/">Access</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/consolidation/">Consolidation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/deletion/">Deletion</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../user-guide/scaleup/">Scaling-up</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">About</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/help/">Getting help</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/CONTRIBUTING/">Contributing</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/license/">License</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../about/release-notes/">Release Notes</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Geocube Server</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">Architecture</li>
      <li class="breadcrumb-item active">Geocube services</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h2 id="geocube-services">Geocube services</h2>
<p>The Geocube Server is composed of the ApiServer, the Consolidater, the Autoscaler and an interface layer to integrate into the user environment.</p>
<p><img alt="Geocube Architecture" src="../../images/GeocubeArchitecture.png" /></p>
<p>To integrate into the environment of deployment, the geocube has an interface layer. Some implementations of this layer are available and the user is free to implement others depending on its own environment.</p>
<p>The interfaces are available in the <code>interface</code> folder.</p>
<h3 id="api-server">API Server</h3>
<p>The API server is the core of the Geocube. It is connected to a PostGIS database that contains the metadata on the indexed images and all the <a href="../../user-guide/entities/">entities</a> describing the images or the way to interact with them.</p>
<p>API Server:</p>
<ul>
<li>is responsible for the life-cycle of all the entities (it's the only service that have access to the database) through (more or less) <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUDL</a> operations.</li>
<li>can be responsible for the life-cycle of the indexed images, through consolidation or deletion.</li>
<li>gathers metadata required to reply to an image or timseries request.</li>
<li>creates a cube of data, by reprojecting, rescaling, casting and mosaicing images stored in an object storage.</li>
<li>delivers timeseries of data.</li>
</ul>
<h3 id="consolidater">Consolidater</h3>
<p>The consolidater service is called when a consolidation job is created to optimize the data. It takes several images, an extent and a layout and it creates a unique file (COG or MUCOG) that contains the data intersecting the extent.</p>
<h3 id="autoscaler">Autoscaler</h3>
<p>The autoscaler is a background service that can be used to automatically deploy consolidater workers when consolidation orders are emitted.</p>
<h3 id="downloader">Downloader</h3>
<p>Virtual machines on which the API server run are not necessary sized to process a large number of image requests. In that case, it's possible to create more machines or more powerful ones using an other autoscaling service (e.g. Cloud Run).</p>
<p>Another way not to overload the API server is to request the metadatas that contain all that is necessary to create a cube of data (but not the data) and consume them in a dedicated service, called <code>downloader</code>, that is responsible for retrieving the data and create the cube.</p>
<p><img alt="Geocube Architecture" src="../../images/GeocubeArchitectureWithDownloaderSimple.png" /></p>
<p>The retrieval is strictly identical (<code>downloader</code> is actually a sub-service of <code>API Server</code>), but it can be run on the machine of the client (provided it has the appropriate rights to get the data). Thus, in a large processing flow where many workers are deployed, <code>geocube-client</code> and <code>downloader</code> will be scaled up in the same way. See <a href="https://github.com/airbusgeo/geocube-client-python/blob/main/Jupyter/Geocube-Client-SDK-1.ipynb">Geocube Python Client SDK1</a> for more information on the <code>downloader</code> usage.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../solution/" class="btn btn-neutral float-left" title="Ecosystem"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../interfaces/" class="btn btn-neutral float-right" title="Interfaces">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../solution/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../interfaces/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
